{"version":3,"file":"ImageSlideAjax.js","names":["ImageSlideAjax","Object","keys","$data","map","el","join","$element","querySelector","innerHTML","setTemplate","querySelectorAll","forEach","appendChild","setItem","data","addEventListener","throttle","clickPrevBtn","bind","getBoundingClientRect","groupWidth","width","lastImage","lastElementChild","lastImgWidth","lastImgX","x","i","currentPosX","style","transform","replace","Number","window","setElements","func","delay","lastFunc","lastRan","args","context","call","Date","now","clearTimeout","setTimeout","firstImage","firstElementChild","firstImgWidth","firstImgX","Component","getData","document","type"],"sources":["../component-set/ajax/imageSlideAjax/ImageSlideAjax.js"],"sourcesContent":["import Component from \"../../../basic/Component.js\";\r\nimport {getData} from \"../../../basic/utils.js\";\r\nimport {setItem} from \"../../../extended-component/slideitem/SlideItem.js\";\r\n\r\nexport default class ImageSlideAjax extends Component {\r\n    setTemplate() {\r\n        return [...Object.keys(this.$data)].map((el) => `<li class=\"slide-item\"></li>`).join(\"\");\r\n    }\r\n\r\n    render() {\r\n        this.$element.querySelector('.slider-group').innerHTML = this.setTemplate();\r\n        this.$element.querySelectorAll('.slide-item').forEach(el => el.appendChild(setItem(this.$data.data)));\r\n    }\r\n\r\n    setEvents() {\r\n        this.$element.querySelector('.prev').addEventListener('click', this.throttle(this.clickPrevBtn.bind(this), 500))\r\n        this.$element.querySelector('.next').addEventListener('click', () => {\r\n            const { width: groupWidth } = this.$element.querySelector('.slider-group').getBoundingClientRect();\r\n            const lastImage = this.$element.querySelector('.slider-group').lastElementChild;\r\n            const { width: lastImgWidth , x: lastImgX } = lastImage.getBoundingClientRect();\r\n            if(lastImgX + lastImgWidth <= groupWidth) {\r\n                return;\r\n            }\r\n\r\n            this.$element.querySelectorAll('.slide-item').forEach((el, i) => {\r\n                const currentPosX = el.style.transform.replace(/translateX\\(|px\\)/gi, \"\");\r\n                el.style.transform = `translateX(${Number(currentPosX) - Number(groupWidth)}px)`;\r\n            })\r\n        })\r\n\r\n        window.addEventListener('resize', this.setElements.bind(this));\r\n    }\r\n\r\n    throttle(func, delay) {\r\n        let lastFunc;\r\n        let lastRan;\r\n        return function(...args) {\r\n            const context = this;\r\n            if(!lastRan) {\r\n                func.call(context, ...args);\r\n                lastRan = Date.now();\r\n            } else {\r\n                if (lastRan) clearTimeout(lastFunc);\r\n                lastFunc = setTimeout(function() {\r\n                    if((Date.now() - lastRan) >= delay) {\r\n                        func.call(context, ...args);\r\n                        lastRan = Date.now();\r\n                    }\r\n                }, delay - (Date.now() - lastRan));\r\n            }\r\n        }\r\n    }\r\n\r\n    clickPrevBtn() {\r\n        const firstImage = this.$element.querySelector('.slider-group').firstElementChild;\r\n        const { width: firstImgWidth , x: firstImgX } = firstImage.getBoundingClientRect();\r\n        if(firstImgX <= firstImgWidth && firstImgX >= 0) {\r\n            return;\r\n        }\r\n        const { width: groupWidth } = this.$element.querySelector('.slider-group').getBoundingClientRect();\r\n        this.$element.querySelectorAll('.slide-item').forEach((el, i) => {\r\n            const currentPosX = el.style.transform.replace(/translateX\\(|px\\)/gi, \"\");\r\n            el.style.transform = `translateX(${Number(currentPosX) + Number(groupWidth)}px)`;\r\n        })\r\n    }\r\n\r\n}\r\n\r\ngetData(\"http://localhost:3000/imageSlide\", (data) =>  new ImageSlideAjax(document.querySelector('.image-slide-ajax'), {data, type: 'type2'}));"],"mappings":"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"}