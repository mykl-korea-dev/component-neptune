{"version":3,"file":"RangeAjax.js","names":["RangeAjax","$data","strMin","min","strMax","max","strMinVal","minValue","strMaxVal","maxValue","strStep","step","map","val","Number","$element","innerHTML","getBoundingClientRect","width","trackWidth","totalSize","i","span","document","createElement","classList","add","style","left","querySelector","appendChild","slider","range","thumbLeft","thumbRight","textContent","value","right","inputLeft","inputRight","addEventListener","Math","toString","inputValue","Component","getData","data"],"sources":["../form-component/ajax/rangeAjax/RangeAjax.js"],"sourcesContent":["import Component from \"../../../basic/Component.js\";\r\nimport {getData} from \"../../../basic/utils.js\";\r\n\r\nexport default class RangeAjax extends Component {\r\n    setElements() {\r\n        const {min: strMin, max: strMax, minValue: strMinVal, maxValue: strMaxVal, step: strStep} = this.$data;\r\n        const [min, max, minValue, maxValue, step] = [strMin, strMax, strMinVal, strMaxVal, strStep].map(val => Number(val));\r\n        this.$element.innerHTML = `\r\n            <input type=\"range\" class=\"input-left\" name=\"max\" min=${min} max=${max} value=${minValue} step=${step}>\r\n            <input type=\"range\" class=\"input-right\" name=\"max\" min=${min} max=${max} value=${maxValue} step=${step}>\r\n\r\n            <div class=\"slider\">\r\n                <div class=\"track\"></div>\r\n                <div class=\"range\"></div>\r\n                <div class=\"thumb left\"><span class=\"thumb-min\"></span></div>\r\n                <div class=\"thumb right\"><span class=\"thumb-max\"></span></div>\r\n            </div>`;\r\n\r\n        const { width } = this.$element.getBoundingClientRect();\r\n        const trackWidth = width - 15;\r\n        const totalSize = (max - min) / step;\r\n        if((min >= 0) &&  max && step && minValue) {\r\n            for (let i = 1; i < totalSize; i += 1) {\r\n                const span = document.createElement('span');\r\n                span.classList.add('step');\r\n                span.style.left = `${trackWidth * ((max - min) / step * i)/ 100}px`;\r\n                this.$element.querySelector('.slider')?.appendChild(span)\r\n            }\r\n        }\r\n\r\n        const slider = this.$element.querySelector('.slider');\r\n        const range = slider?.querySelector('.range');\r\n        const thumbLeft = slider.querySelector('.slider .thumb.left');\r\n        const thumbRight = slider.querySelector('.thumb.right');\r\n        slider.querySelector('.thumb-min').textContent = this.$element.querySelector(\".input-left\").value;\r\n        slider.querySelector('.thumb-max').textContent = this.$element.querySelector(\".input-right\").value;\r\n        thumbLeft.style.left = `${trackWidth * ((max - min) / step * (minValue / step)) / 100}px`;\r\n        range.style.left = `${trackWidth * ((max - min) / step * (minValue / step)) / 100}px`;\r\n        range.style.right = `${trackWidth * ((max - min) / step * ((max - maxValue) / step)) / 100}px`;\r\n        thumbRight.style.left = `${trackWidth * ((max - min) / step * (maxValue / step)) / 100}px`;\r\n    }\r\n\r\n    setEvents() {\r\n        const { width } = this.$element.getBoundingClientRect();\r\n        const trackWidth = width - 15;\r\n        const slider = this.$element.querySelector('.slider');\r\n        const range = slider?.querySelector('.range');\r\n        const thumbLeft = slider.querySelector('.slider .thumb.left');\r\n        const thumbRight = slider.querySelector('.thumb.right');\r\n        const inputLeft = this.$element.querySelector('.input-left');\r\n        const inputRight = this.$element.querySelector('.input-right');\r\n        inputLeft?.addEventListener('input', () => {\r\n            const [min, max, step] = [Number(inputLeft.min), Number(inputLeft.max), Number(inputLeft.step)];\r\n            inputLeft.value = Math.min(Number(inputLeft.value), Number(inputRight.value) - Number(inputLeft.step)).toString();\r\n\r\n            const inputValue = Number(inputLeft.value, 10)\r\n            thumbLeft.style.left = `${trackWidth * ((max - min) / step * (inputValue / step)) / 100}px`;\r\n            range.style.left = `${trackWidth * ((max - min) / step * (inputValue / step)) / 100}px`;\r\n            slider.querySelector('.thumb-min').textContent = this.$element.querySelector(\".input-left\").value;\r\n\r\n        })\r\n\r\n        inputRight?.addEventListener('input', () => {\r\n            const [min, max, step] = [Number(inputRight.min), Number(inputRight.max), Number(inputRight.step)];\r\n            inputRight.value = Math.max(Number(inputRight.value), Number(inputLeft.value) + Number(inputRight.step)).toString();\r\n\r\n            const inputValue = Number(inputRight.value, 10)\r\n            thumbRight.style.left = `${trackWidth * ((max - min) / step * (inputValue / step)) / 100}px`;\r\n            range.style.right = `${trackWidth - (trackWidth * ((max - min) / step * (inputValue / step)) / 100)}px`;\r\n            slider.querySelector('.thumb-max').textContent = this.$element.querySelector(\".input-right\").value;\r\n        })\r\n    }\r\n\r\n    setThumbLeft() {\r\n        const { width } = this.$element.getBoundingClientRect();\r\n        const trackWidth = width - 15;\r\n        return `${trackWidth * ((max - min) / step * (inputValue / step)) / 100}px`;\r\n    }\r\n\r\n    setThumbRight() {\r\n\r\n    }\r\n}\r\n\r\ngetData('http://localhost:3000/range', (data) =>\r\n    new RangeAjax(document.querySelector('.form-range-ajax'), data));"],"mappings":"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"}