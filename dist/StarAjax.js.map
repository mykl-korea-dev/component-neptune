{"version":3,"file":"StarAjax.js","mappings":"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","names":["StarAjax","$data","min","max","value","starValue","Number","starGroupEl","document","createElement","classList","add","i","parseInt","template","innerHTML","appendChild","content","$element","contains","button","textContent","lockedStar","addEventListener","e","_this","offsetX","target","index","dataset","point","width","getClientRects","isOverHalf","renderStar","clientIndex","payload","regex","_toConsumableArray","querySelectorAll","forEach","el","idx","className","replace","Component","data","querySelector"],"sources":["../ui-component/ajax/starAjax/StarAjax.js"],"sourcesContent":["import Component from \"../../../basic/Component.js\";\r\nimport {getData} from \"../../../basic/utils.js\";\r\n\r\nexport default class StarAjax extends Component {\r\n    setElements() {\r\n        const { min , max, value } = this.$data;\r\n        let starValue = Number(value);\r\n        const starGroupEl = document.createElement('div');\r\n        starGroupEl.classList.add('star-group');\r\n        for (let i = parseInt(min, 10); i < parseInt(max, 10); i++) {\r\n            const template = document.createElement('template');\r\n            // const fragment = new DocumentFragment();\r\n\r\n            template.innerHTML = `\r\n                ${starValue >= 1 ? `<div class=\"star-item star-fill\" data-point=\"${i+1}\"></div>` : ''}\r\n                ${starValue >= 0.5 && starValue < 1 ? `<div class=\"star-item star-half\" data-point=\"${i+1}\"></div>` : ''}\r\n                ${starValue < 0.5? `<div class=\"star-item star-empty\" data-point=\"${i+1}\"></div>` : ''}\r\n            `\r\n            starGroupEl.appendChild(template.content);\r\n            starValue -= 1;\r\n        }\r\n        this.$element.appendChild(starGroupEl);\r\n\r\n        if(this.$element.classList.contains('eval')) {\r\n            const button = document.createElement('button');\r\n            button.classList.add(\"reset-btn\");\r\n            button.textContent = \"취소\";\r\n            this.$element.appendChild(button);\r\n        }\r\n        this.lockedStar = false;\r\n    }\r\n\r\n    setEvents() {\r\n        this.$element.addEventListener('mousemove', (e) => {\r\n            if(!this.$element.classList.contains('eval') || this.lockedStar) {\r\n                return;\r\n            }\r\n\r\n            const { offsetX, target } = e;\r\n            const index = parseInt(target.dataset.point, 10) - 1;\r\n            const { width } = target.getClientRects()[0];\r\n            const isOverHalf = offsetX > width / 2;\r\n\r\n            this.renderStar({clientIndex: index,  isOverHalf});\r\n        })\r\n\r\n        this.$element.addEventListener('click', ({target}) => {\r\n            this.lockedStar = true;\r\n\r\n            if(target.classList.contains(\"reset-btn\")) {\r\n                this.lockedStar = false;\r\n            }\r\n        })\r\n    }\r\n\r\n    renderStar(payload={}) {\r\n        const { clientIndex = -1, isOverHalf = false } = payload;\r\n        const regex = /star-fill|star-half|star-empty/g;\r\n\r\n        [...this.$element.querySelectorAll('.star-item')].forEach((el, idx) => {\r\n            el.className = idx < clientIndex ? el.className.replace(regex, 'star-fill') : el.className.replace(regex, 'star-empty')\r\n\r\n            if (clientIndex === idx) {\r\n                el.className = isOverHalf ? el.className.replace(regex, 'star-fill') : el.className.replace(regex, 'star-half')\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\ngetData(\"http://localhost:3000/progress\", (data) => new StarAjax(document.querySelector('.star-ajax'), data));\r\n\r\n"]}