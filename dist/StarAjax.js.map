{"version":3,"file":"StarAjax.js","names":["StarAjax","$data","min","max","value","starValue","Number","starGroupEl","document","createElement","classList","add","i","parseInt","div","innerHTML","$element","appendChild","contains","button","textContent","lockedStar","addEventListener","e","offsetX","target","index","dataset","point","width","getClientRects","isOverHalf","renderStar","clientIndex","payload","regex","querySelectorAll","forEach","el","idx","className","replace","Component","getData","data","querySelector"],"sources":["../ui-component/ajax/starAjax/StarAjax.js"],"sourcesContent":["import Component from \"../../../basic/Component.js\";\r\nimport {getData} from \"../../../basic/utils.js\";\r\n\r\nexport default class StarAjax extends Component {\r\n    setElements() {\r\n        const { min , max, value } = this.$data;\r\n        let starValue = Number(value);\r\n        const starGroupEl = document.createElement('div');\r\n        starGroupEl.classList.add('star-group');\r\n        for (let i = parseInt(min, 10); i < parseInt(max, 10); i++) {\r\n            // const template = document.createElement('template');\r\n            // const fragment = new DocumentFragment();\r\n            const div = document.createElement('div');\r\n            div.innerHTML = `\r\n                ${starValue >= 1 ? `<div class=\"star-item star-fill\" data-point=\"${i+1}\"></div>` : ''}\r\n                ${starValue >= 0.5 && starValue < 1 ? `<div class=\"star-item star-half\" data-point=\"${i+1}\"></div>` : ''}\r\n                ${starValue < 0.5? `<div class=\"star-item star-empty\" data-point=\"${i+1}\"></div>` : ''}\r\n            `\r\n            starGroupEl.innerHTML += div.innerHTML;\r\n            // starGroupEl.appendChild(template.content);\r\n            // starGroupEl.appendChild(div);\r\n            starValue -= 1;\r\n        }\r\n        this.$element.appendChild(starGroupEl);\r\n\r\n        if(this.$element.classList.contains('eval')) {\r\n            const button = document.createElement('button');\r\n            button.classList.add(\"reset-btn\");\r\n            button.textContent = \"취소\";\r\n            this.$element.appendChild(button);\r\n        }\r\n        this.lockedStar = false;\r\n    }\r\n\r\n    setEvents() {\r\n        this.$element.addEventListener('mousemove', (e) => {\r\n            if(!this.$element.classList.contains('eval') || this.lockedStar) {\r\n                return;\r\n            }\r\n\r\n            const { offsetX, target } = e;\r\n            const index = parseInt(target.dataset.point, 10) - 1;\r\n            const { width } = target.getClientRects()[0];\r\n            const isOverHalf = offsetX > width / 2;\r\n\r\n            this.renderStar({clientIndex: index,  isOverHalf});\r\n        })\r\n\r\n        this.$element.addEventListener('click', ({target}) => {\r\n            this.lockedStar = true;\r\n\r\n            if(target.classList.contains(\"reset-btn\")) {\r\n                this.lockedStar = false;\r\n            }\r\n        })\r\n    }\r\n\r\n    renderStar(payload={}) {\r\n        const { clientIndex = -1, isOverHalf = false } = payload;\r\n        const regex = /star-fill|star-half|star-empty/g;\r\n\r\n        [...this.$element.querySelectorAll('.star-item')].forEach((el, idx) => {\r\n            el.className = idx < clientIndex ? el.className.replace(regex, 'star-fill') : el.className.replace(regex, 'star-empty')\r\n\r\n            if (clientIndex === idx) {\r\n                el.className = isOverHalf ? el.className.replace(regex, 'star-fill') : el.className.replace(regex, 'star-half')\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\ngetData(\"http://localhost:3000/progress\", (data) => new StarAjax(document.querySelector('.star-ajax'), data));\r\n\r\n"],"mappings":"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"}