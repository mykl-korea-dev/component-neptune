<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../../basic/common.css">
    <link rel="stylesheet" href="../../calendar/calendar.css">
</head>
<body>
<div id="form">
    <div id="calendar">
    </div>
</div>
<script type="module">
    import CalendarAjax from './CalendarListAjax.js';
    new CalendarAjax(document.querySelector('#calendar'));
    fetch('https://70138c9d-d3fd-41b8-b75e-860cc7f466e4.mock.pstmn.io/api/scenarios')
        .then(res => res.json())
        .then(data => {
            const { items } = data;
            items.push(items[0]);
            items.map(item => {
                const { regDate, context } = item;
                const timeRegex = /(\d{4})(\d{2})(\d{2}).*/gm;
                const replacedEndTime = regDate.toString().replace(timeRegex, "$1-$2-$3");

                const dateEl = document.querySelector(`#calendar input[value="${replacedEndTime}"]`);
                const div = document.createElement('div');
                div.innerText = context;
                div.style.overflow = "hidden";
                div.style.background = "#aa6767";
                div.style.color = "#000";
                div.style.margin = '4px';
                div.style.padding = '4px 8px';
                div.style.borderRadius = '4px';
                div.style.textOverflow = "ellipsis";
                div.style.whiteSpace = "nowrap";
                div.style.overflow = "hidden";
                dateEl.parentElement.querySelector('.content').appendChild(div);
            })
        })
</script>
</body>
</html>